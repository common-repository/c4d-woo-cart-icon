!function(r){"use strict";var n={c4d_woo_cart_icon_number:function(o){var t=r(".c4d-woo-cart-icon__icon .number");t.html(parseFloat(t.html())+o)},hideList:function(o,t){t?r(".c4d-woo-cart-icon").removeClass("empty"):r(o).parents(".c4d-woo-cart-icon").find(".product_list_widget li").length<=1?r(o).parents(".c4d-woo-cart-icon").addClass("empty"):r(o).parents(".c4d-woo-cart-icon").removeClass("empty")},miniTotalButtons:function(){var t=setInterval(function(){r(".c4d-woo-cart-icon-wrap").each(function(){if(r(this).hasClass("type-slide")){var o=r(this).find(".c4d-woo-cart-icon");o.find(".c4d-woo-cart-icon__footer").remove(),o.append('<div class="c4d-woo-cart-icon__footer"></div>'),0<o.find(".woocommerce-mini-cart__buttons").length&&clearTimeout(t),o.find(".c4d-woo-cart-icon__footer").append(o.find(".woocommerce-mini-cart__total").detach()).append(o.find(".woocommerce-mini-cart__buttons").detach())}else clearTimeout(t)})},500)},buildCart:function(){var a=r(".c4d-woo-cart-icon-wrap"),e="c4d-woo-cart-open";r("body").on("click",".c4d-woo-cart-icon-wrap",function(o){o.target==o.currentTarget&&r("body").removeClass(e)}),r("body").on("click",".js_c4d_wci_close_cart",function(o){o.target==o.currentTarget&&r("body").removeClass(e)}),r("body").on("click",".js_c4d_wci_cart_click",function(o){return o.preventDefault(),r("body").toggleClass(e),!1}),r(document.body).on("added_to_cart removed_from_cart",function(o,t,c){a.hasClass("type-slide")&&n.miniTotalButtons(),r("body").addClass(e)}),a.hasClass("type-slide")&&n.miniTotalButtons()},c4dcount:0,updateCountNumber:function(){r(document).ajaxComplete(function(o,t,c){if(clearTimeout(n.c4dcount),void 0!==c.data||void 0!==c.url){var a=-1;void 0!==c.data&&(a=c.url.search("add_to_cart")),-1!=a&&(n.c4dcount=setTimeout(function(){var o=t.responseJSON.fragments.cart_count;o<1?r(".c4d-woo-cart-icon__icon").addClass("empty"):r(".c4d-woo-cart-icon__icon").removeClass("empty"),r(".c4d-woo-cart-icon__icon .number").html(o)},1e3))}})},removeItem:function(){r("body").on("click",".remove_from_cart_button, .c4d-woo-cart-icon__remove-link",function(o){r("body").addClass("c4d_woo_cart_popup_remove_item")}),r(document.body).on("removed_from_cart",function(){r("body").removeClass("c4d_woo_cart_popup_remove_item")})},popupUpdateQty:function(){var o;r("body").on("change",".widget_shopping_cart_content_popup .woocommerce-cart-form input.qty",function(){var t=r(this);clearTimeout(o),o=setTimeout(function(){var o={action:"c4d_woo_cart_icon_popup_qty_update",cart_item_key:t.attr("name").replace("cart[","").replace("][qty]",""),qty:t.val()};r("body").addClass("c4d_woo_cart_popup_update_qty"),r.ajax({type:"POST",data:o,url:woocommerce_params.ajax_url,dataType:"json"}).done(function(){r(document.body).trigger("wc_fragment_refresh")}),r(document.body).on("wc_fragments_refreshed wc_fragments_ajax_error",function(){r("body").removeClass("c4d_woo_cart_popup_update_qty")})},200)})},callForPriceButton:function(){r("form.variations_form").on("show_variation",function(o,t){t.is_in_stock?r("body").removeClass("c4d-woo-cart-is-call-for-price"):r("body").addClass("c4d-woo-cart-is-call-for-price")}),r('body.single-product button[name="add-to-cart"]').length<1?r("body").addClass("c4d-woo-cart-is-call-for-price"):r("body").removeClass("c4d-woo-cart-is-call-for-price")},flyAddToCartButton:function(){var c=r(".entry-summary");if(0<c.length){var o=function(){c.offset().top;var o=c.offset().top+c.outerHeight();r(window).scrollTop(),r(window).innerHeight();o<r(window).scrollTop()+150?r("body").addClass("c4d-woo-cart-fly-cart-active"):r("body").removeClass("c4d-woo-cart-fly-cart-active")};o(),window.addEventListener("scroll",function(){o()}),r(".c4d-woo-cart-fly-add-to-cart").each(function(){var o=r(this).data("product_id");if(o){var t=r("#product-"+o);0<t.length&&(t.hasClass("product-type-simple")||t.hasClass("product-type-external")||r("body").on("click",".c4d-woo-cart-fly-add-to-cart .js-add-to-cart",function(o){o.preventDefault(),r("html, body").animate({scrollTop:c.offset().top},400)}))}})}}};r(document).ready(function(){n.buildCart(),n.updateCountNumber(),n.removeItem(),n.popupUpdateQty(),n.callForPriceButton(),n.flyAddToCartButton(),r("body").on("click",".add_to_cart_button",function(){n.hideList(this,!0)}),r(".c4d-woo-cart-icon").hover(function(){r("body").addClass("c4d-woo-cart-icon-body-not-scroll")},function(){r("body").removeClass("c4d-woo-cart-icon-body-not-scroll")})})}(jQuery);